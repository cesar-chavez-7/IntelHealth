<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculadora de Riesgo Dental</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-light">

  <div class="container py-5">
    <h2 class="text-center mb-4">🦷Riesgo Dental</h2>

    <form id="dentalForm" class="card p-4 shadow-sm">
      <fieldset class="mb-3">
        <legend class="h5 mb-4 text-primary">Cuestionario</legend>

        <div class="mb-3">
          <label class="form-label">¿Con qué frecuencia te cepillas al día?</label>
          <select class="form-select" name="cepillado" required>
            <option value="0">     </option>
            <option value="0">1 vez o menos</option>
            <option value="1">2 veces</option>
            <option value="2">3 veces o más</option>
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">¿Consumes azúcar (dulces, gaseosas) con frecuencia?</label>
          <select class="form-select" name="azucar" required>
            <option value="0">     </option>
            <option value="2">Sí, varias veces al día</option>
            <option value="1">A veces</option>
            <option value="0">Casi nunca</option>
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">¿Has visitado al odontólogo en el último año?</label>
          <select class="form-select" name="dentista" required>
            <option value="0">     </option>
            <option value="2">No</option>
            <option value="1">Sí, hace más de 6 meses</option>
            <option value="0">Sí, en los últimos 6 meses</option>
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">¿Sientes sangrado al cepillarte?</label>
          <select class="form-select" name="sangrado" required>
            <option value="0">     </option>
            <option value="2">Sí</option>
            <option value="1">A veces</option>
            <option value="0">No</option>
          </select>
        </div>

        <div class="mb-4">
          <label class="form-label">¿Has tenido caries en el último año?</label>
          <select class="form-select" name="caries" required>
            <option value="0">     </option>
            <option value="2">Sí</option>
            <option value="1">Solo una</option>
            <option value="0">Ninguna</option>
          </select>
        </div>
      </fieldset>

      <div class="d-grid">
        <button type="submit" class="btn btn-primary btn-lg">Calcular Riesgo</button>
      </div>
    </form>
  </div>

  <script>
    document.getElementById("dentalForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const form = e.target;
      let score = 0;

      score += parseInt(form.cepillado.value) === 0 ? 2 : parseInt(form.cepillado.value) === 1 ? 1 : 0;
      score += parseInt(form.azucar.value);
      score += parseInt(form.dentista.value);
      score += parseInt(form.sangrado.value);
      score += parseInt(form.caries.value);

      let titulo = '';
      let mensaje = '';
      let icono = '';
      let recomendacion = '';

      if (score >= 8) {
        titulo = "🔴 Riesgo ALTO";
        mensaje = "Necesitas mejorar tus hábitos de higiene oral.";
        icono = "error";
        recomendacion = "Agenda una cita lo antes posible para evitar complicaciones.";
      } else if (score >= 4) {
        titulo = "🟡 Riesgo MEDIO";
        mensaje = "Tienes algunos hábitos que podrías mejorar.";
        icono = "warning";
        recomendacion = "Considera visitar al odontólogo para una evaluación preventiva.";
      } else {
        titulo = "🟢 Riesgo BAJO";
        mensaje = "¡Excelente! Tu salud bucal está en buen estado.";
        icono = "success";
        recomendacion = "Sigue con tus buenos hábitos y realiza chequeos regulares.";
      }

      Swal.fire({
        title: titulo,
        html: `
          <p class="mb-2">${mensaje}</p>
          <p class="fw-medium">${recomendacion}</p>
        `,
        icon: icono,
        showCancelButton: true,
        confirmButtonText: 'Agendar cita',
        cancelButtonText: 'Cerrar',
        confirmButtonColor: '#0d6efd',
        cancelButtonColor: '#6c757d'
      }).then((result) => {
        if (result.isConfirmed) {
          window.open('agenda.html', '_blank');
        }
      });
    });
  </script>

</body>
</html>